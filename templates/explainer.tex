% LaTeX Template for AI/ML Foundations Explainer
% Configured for LuaLaTeX with standard fonts
% Based on master-thesis template (simplified)

\documentclass[
  $if(fontsize)$$fontsize$$else$11pt$endif$,
  a4paper,
  oneside
]{article}

% Encoding and font support for LuaLaTeX
\usepackage{fontspec}

% Use standard fonts (no custom font files needed)
\setmainfont{Latin Modern Roman}
\setsansfont{Latin Modern Sans}
\setmonofont{Latin Modern Mono}

% Polyglossia for language support
\usepackage{polyglossia}
\setdefaultlanguage{english}

% Page layout
\usepackage[
  left=2.54cm,
  right=2.54cm,
  top=2.54cm,
  bottom=2.54cm
]{geometry}

% Paragraph formatting
\usepackage{indentfirst}
\setlength{\parindent}{0.5cm}
\setlength{\parskip}{0.5em}

% Line spacing
\usepackage{setspace}
\onehalfspacing

% Headers and footers
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0.4pt}
\fancyhead[L]{\footnotesize AI/ML Foundations Explainer}
\fancyhead[R]{\footnotesize\leftmark}
\fancyfoot[C]{\thepage}

% Section formatting
\usepackage{titlesec}
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}

% Heading styles
\titleformat{\section}
  {\normalfont\Large\bfseries}
  {\thesection}{1em}{}
\titleformat{\subsection}
  {\normalfont\large\bfseries}
  {\thesubsection}{1em}{}
\titleformat{\subsubsection}
  {\normalfont\normalsize\bfseries}
  {\thesubsubsection}{1em}{}

% Hyperlinks
\usepackage[
  colorlinks=true,
  linkcolor=blue!60!black,
  citecolor=blue!60!black,
  urlcolor=blue!60!black,
  pdfusetitle
]{hyperref}

% Graphics support
\usepackage{graphicx}
\usepackage{float}

% Graphics path (relative to drafts directory)
\graphicspath{{../figures/ch-explainer/}{../figures/}{./figures/}}

% Table support
\usepackage{longtable}
\usepackage{booktabs}
\usepackage{array}

% List support
\usepackage{enumitem}

% Pandoc tightlist command
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

% Color support
\usepackage{xcolor}

% Caption formatting
\usepackage{caption}
\captionsetup{
  font={small},
  labelfont={bf},
  format=plain,
  justification=justified,
  singlelinecheck=false
}

% Fix for longtable caption counter issues
\makeatletter
\def\fnum@table{\tablename~\thetable}
\makeatother

% Code block styling
\usepackage{listings}
\lstset{
  basicstyle=\ttfamily\small,
  breaklines=true,
  frame=single,
  framerule=0.5pt,
  rulecolor=\color{gray!50},
  backgroundcolor=\color{gray!5},
  xleftmargin=0.5cm,
  xrightmargin=0.5cm,
}

% For verbatim environments (Pandoc code blocks)
\usepackage{fvextra}
\usepackage{framed}

% Define Shaded environment for Pandoc code blocks
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}

% Define Highlighting environment
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{
  commandchars=\\\{\},
  fontsize=\small,
  breaklines=true,
}

% Pandoc syntax highlighting commands
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}

% Pandoc metadata
$if(title)$
\title{$title$}
$endif$

$if(author)$
\author{$for(author)$$author$$sep$ \and $endfor$}
$endif$

$if(date)$
\date{$date$}
$else$
\date{\today}
$endif$

% Document metadata for PDF
\hypersetup{
  pdftitle={$if(title)$$title$$else$AI/ML Foundations Explainer$endif$},
  pdfauthor={$if(author)$$for(author)$$author$$sep$; $endfor$$endif$}
}

% Begin document
\begin{document}

% Title page
$if(title)$
\maketitle
\thispagestyle{empty}
\clearpage
$endif$

% Abstract
$if(abstract)$
\begin{abstract}
$abstract$
\end{abstract}
\clearpage
$endif$

% Table of contents
$if(toc)$
\tableofcontents
\clearpage
$endif$

% List of figures
$if(lof)$
\listoffigures
\clearpage
$endif$

% Main content
$body$

\end{document}
